-- MySQL Script generated by MySQL Workbench
-- 04/21/20 22:26:52
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema carloca
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `carloca` ;

-- -----------------------------------------------------
-- Schema carloca
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `carloca` DEFAULT CHARACTER SET utf8 ;
USE `carloca` ;

-- -----------------------------------------------------
-- Table `carloca`.`Loc_Cargo`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `carloca`.`Loc_Cargo` ;

CREATE TABLE IF NOT EXISTS `carloca`.`Loc_Cargo` (
  `Cd_Cargo` INT NOT NULL,
  `Nm_Cargo` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`Cd_Cargo`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `carloca`.`Loc_Depto`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `carloca`.`Loc_Depto` ;

CREATE TABLE IF NOT EXISTS `carloca`.`Loc_Depto` (
  `Cd_Depto` INT NOT NULL,
  `Nm_Depto` VARCHAR(45) NOT NULL,
  `Vl_Orc_Depto` DECIMAL(10,2) NULL,
  PRIMARY KEY (`Cd_Depto`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `carloca`.`Loc_Funcionario`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `carloca`.`Loc_Funcionario` ;

CREATE TABLE IF NOT EXISTS `carloca`.`Loc_Funcionario` (
  `Cd_Func` INT NOT NULL,
  `Nm_Func` VARCHAR(45) NOT NULL,
  `Dt_Inicio` DATE NULL,
  `Cd_Gerente` INT NOT NULL,
  `Nr_CPF` INT(12) NULL,
  `Vl_Salario` DECIMAL(11,2) NULL,
  `Vl_Perc_Comissao` DECIMAL(5,2) NULL,
  `Cd_Depto` INT NOT NULL,
  `Cd_Cargo` INT NOT NULL,
  PRIMARY KEY (`Cd_Func`),
  INDEX `Func_Cd_Cargo_idx` (`Cd_Cargo` ASC),
  INDEX `Func_Cd_Depto_idx` (`Cd_Depto` ASC),
  CONSTRAINT `Func_Cd_Cargo`
    FOREIGN KEY (`Cd_Cargo`)
    REFERENCES `carloca`.`Loc_Cargo` (`Cd_Cargo`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `Func_Cd_Depto`
    FOREIGN KEY (`Cd_Depto`)
    REFERENCES `carloca`.`Loc_Depto` (`Cd_Depto`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `carloca`.`Loc_Tp_Cliente`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `carloca`.`Loc_Tp_Cliente` ;

CREATE TABLE IF NOT EXISTS `carloca`.`Loc_Tp_Cliente` (
  `cd_Tp_Cliente` INT NOT NULL,
  `Nm_Tp_Cliente` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`cd_Tp_Cliente`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `carloca`.`Loc_Cliente`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `carloca`.`Loc_Cliente` ;

CREATE TABLE IF NOT EXISTS `carloca`.`Loc_Cliente` (
  `Cd_cliente` INT NOT NULL,
  `Nm_Cliente` VARCHAR(45) NOT NULL,
  `Cd_Tp_Cliente` INT NOT NULL,
  `Nr_Estrelas` INT NULL,
  `Nr_Habilitacao` INT(15) NULL,
  PRIMARY KEY (`Cd_cliente`),
  INDEX `Cliente_Cd_Tp_Cliente_idx` (`Cd_Tp_Cliente` ASC),
  CONSTRAINT `Cliente_Cd_Tp_Cliente`
    FOREIGN KEY (`Cd_Tp_Cliente`)
    REFERENCES `carloca`.`Loc_Tp_Cliente` (`cd_Tp_Cliente`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `carloca`.`Loc_Operadora`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `carloca`.`Loc_Operadora` ;

CREATE TABLE IF NOT EXISTS `carloca`.`Loc_Operadora` (
  `cd_Operadora` INT NOT NULL,
  `Nm_Operadora` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`cd_Operadora`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `carloca`.`Loc_Fone_Cliente`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `carloca`.`Loc_Fone_Cliente` ;

CREATE TABLE IF NOT EXISTS `carloca`.`Loc_Fone_Cliente` (
  `cd_Fone_Cliente` INT NOT NULL,
  `Nm_Fone_Cliente` VARCHAR(16) NOT NULL,
  `cd_Cliente` INT NOT NULL,
  `cd_Operadora` INT NOT NULL,
  PRIMARY KEY (`cd_Fone_Cliente`),
  INDEX `Fone_Cli_Cd_Cliente_idx` (`cd_Cliente` ASC),
  INDEX `Fone_Cd_Operadora_idx` (`cd_Operadora` ASC),
  CONSTRAINT `Fone_Cli_Cd_Cliente`
    FOREIGN KEY (`cd_Cliente`)
    REFERENCES `carloca`.`Loc_Cliente` (`Cd_cliente`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `Fone_Cd_Operadora`
    FOREIGN KEY (`cd_Operadora`)
    REFERENCES `carloca`.`Loc_Operadora` (`cd_Operadora`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `carloca`.`Loc_Estado`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `carloca`.`Loc_Estado` ;

CREATE TABLE IF NOT EXISTS `carloca`.`Loc_Estado` (
  `Cd_Estado` INT NOT NULL,
  `Nm_Estado` VARCHAR(45) NOT NULL,
  `Sigla_Estado` VARCHAR(2) NOT NULL,
  PRIMARY KEY (`Cd_Estado`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `carloca`.`Loc_Cidade`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `carloca`.`Loc_Cidade` ;

CREATE TABLE IF NOT EXISTS `carloca`.`Loc_Cidade` (
  `Cd_Cidade` INT NOT NULL,
  `Nm_Cidade` VARCHAR(45) NOT NULL,
  `Cd_Estado` INT NOT NULL,
  PRIMARY KEY (`Cd_Cidade`),
  INDEX `Cidade_Cd_Estado_idx` (`Cd_Estado` ASC),
  CONSTRAINT `Cidade_Cd_Estado`
    FOREIGN KEY (`Cd_Estado`)
    REFERENCES `carloca`.`Loc_Estado` (`Cd_Estado`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `carloca`.`Loc_Agencia`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `carloca`.`Loc_Agencia` ;

CREATE TABLE IF NOT EXISTS `carloca`.`Loc_Agencia` (
  `cd_Agencia` INT NOT NULL,
  `Nm_Agencia` VARCHAR(45) NOT NULL,
  `cd_Cidade` INT NOT NULL,
  PRIMARY KEY (`cd_Agencia`),
  INDEX `Agencia_Cd_Cidade_idx` (`cd_Cidade` ASC),
  CONSTRAINT `Agencia_Cd_Cidade`
    FOREIGN KEY (`cd_Cidade`)
    REFERENCES `carloca`.`Loc_Cidade` (`Cd_Cidade`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `carloca`.`Loc_Banco`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `carloca`.`Loc_Banco` ;

CREATE TABLE IF NOT EXISTS `carloca`.`Loc_Banco` (
  `cd_Banco` INT NOT NULL,
  `Nm_Banco` VARCHAR(60) NOT NULL,
  `url` VARCHAR(45) NULL,
  PRIMARY KEY (`cd_Banco`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `carloca`.`Loc_Age_Bco`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `carloca`.`Loc_Age_Bco` ;

CREATE TABLE IF NOT EXISTS `carloca`.`Loc_Age_Bco` (
  `cd_agencia` INT NOT NULL,
  `Nm_Agencia` VARCHAR(45) NOT NULL,
  `cd_banco` INT NOT NULL,
  PRIMARY KEY (`cd_agencia`),
  INDEX `Age_Bco_cd_banco_idx` (`cd_banco` ASC),
  CONSTRAINT `Age_Bco_cd_banco`
    FOREIGN KEY (`cd_banco`)
    REFERENCES `carloca`.`Loc_Banco` (`cd_Banco`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `carloca`.`Loc_Pedido_Locacao`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `carloca`.`Loc_Pedido_Locacao` ;

CREATE TABLE IF NOT EXISTS `carloca`.`Loc_Pedido_Locacao` (
  `Nr_Pedido` INT NOT NULL,
  `Dt_Locacao` DATE NOT NULL,
  `Cd_Cliente` INT NOT NULL,
  `Cd_Agencia` INT NOT NULL,
  `Qt_Dias` INT NULL,
  `Vl_Total` DECIMAL(10,2) NULL,
  `Status` CHAR(1) NULL,
  `Dt_Retirada` DATE NULL,
  `Dt_Entrega` DATE NULL,
  `Cd_Func` INT NOT NULL,
  `Dt_Pagto` DATE NULL,
  `Cd_Age_Bco` INT NOT NULL,
  PRIMARY KEY (`Nr_Pedido`),
  INDEX `Pedido_Cd_Cliente_idx` (`Cd_Cliente` ASC),
  INDEX `Pedido_Cd_Agencia_idx` (`Cd_Agencia` ASC),
  INDEX `Pedido_cd_age_bco_idx` (`Cd_Age_Bco` ASC),
  CONSTRAINT `Pedido_Cd_Cliente`
    FOREIGN KEY (`Cd_Cliente`)
    REFERENCES `carloca`.`Loc_Cliente` (`Cd_cliente`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `Pedido_Cd_Func`
    FOREIGN KEY (`Cd_Func`)
    REFERENCES `carloca`.`Loc_Funcionario` (`Cd_Func`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `Pedido_Cd_Agencia`
    FOREIGN KEY (`Cd_Agencia`)
    REFERENCES `carloca`.`Loc_Agencia` (`cd_Agencia`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `Pedido_cd_age_bco`
    FOREIGN KEY (`Cd_Age_Bco`)
    REFERENCES `carloca`.`Loc_Age_Bco` (`cd_agencia`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `carloca`.`Loc_Proprietario`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `carloca`.`Loc_Proprietario` ;

CREATE TABLE IF NOT EXISTS `carloca`.`Loc_Proprietario` (
  `cd_proprietario` INT NOT NULL,
  `Nm_Proprietario` VARCHAR(45) NOT NULL,
  `Nr_CPF` INT NULL,
  PRIMARY KEY (`cd_proprietario`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `carloca`.`Loc_Fabricante`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `carloca`.`Loc_Fabricante` ;

CREATE TABLE IF NOT EXISTS `carloca`.`Loc_Fabricante` (
  `cd_Fabricante` INT NOT NULL,
  `Nm_Fabricante` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`cd_Fabricante`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `carloca`.`Loc_Modelo`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `carloca`.`Loc_Modelo` ;

CREATE TABLE IF NOT EXISTS `carloca`.`Loc_Modelo` (
  `cd_Modelo` INT NOT NULL,
  `Nm_Modelo` VARCHAR(45) NOT NULL,
  `cd_Fabricante` INT NOT NULL,
  PRIMARY KEY (`cd_Modelo`),
  INDEX `Modelo_cd_fabricante_idx` (`cd_Fabricante` ASC),
  CONSTRAINT `Modelo_cd_fabricante`
    FOREIGN KEY (`cd_Fabricante`)
    REFERENCES `carloca`.`Loc_Fabricante` (`cd_Fabricante`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `carloca`.`Loc_Grupo`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `carloca`.`Loc_Grupo` ;

CREATE TABLE IF NOT EXISTS `carloca`.`Loc_Grupo` (
  `cd_Grupo` INT NOT NULL,
  `Nm_Grupo` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`cd_Grupo`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `carloca`.`Loc_Tp_Automovel`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `carloca`.`Loc_Tp_Automovel` ;

CREATE TABLE IF NOT EXISTS `carloca`.`Loc_Tp_Automovel` (
  `cd_Tp_Automovel` INT NOT NULL,
  `Nm_Tp_Automovel` VARCHAR(15) NOT NULL,
  PRIMARY KEY (`cd_Tp_Automovel`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `carloca`.`Loc_Tp_Combustivel`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `carloca`.`Loc_Tp_Combustivel` ;

CREATE TABLE IF NOT EXISTS `carloca`.`Loc_Tp_Combustivel` (
  `cd_Tp_Combustivel` INT NOT NULL,
  `Nm_Tp_Combustivelcol` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`cd_Tp_Combustivel`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `carloca`.`Loc_Cor`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `carloca`.`Loc_Cor` ;

CREATE TABLE IF NOT EXISTS `carloca`.`Loc_Cor` (
  `cd_Cor` INT NOT NULL,
  `Desc_Cor` VARCHAR(20) NOT NULL,
  PRIMARY KEY (`cd_Cor`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `carloca`.`Loc_Veiculo`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `carloca`.`Loc_Veiculo` ;

CREATE TABLE IF NOT EXISTS `carloca`.`Loc_Veiculo` (
  `Nr_Placa` VARCHAR(8) NOT NULL,
  `Cd_Proprietario` INT NOT NULL,
  `Nr_Chassis` VARCHAR(45) NULL,
  `Status` VARCHAR(1) NULL,
  `Km_Atual` INT NULL,
  `Tp_Automovel` INT NOT NULL,
  `Tp_Combustivel` INT NOT NULL,
  `cd_Modelo` INT NOT NULL,
  `cd_cor` INT NOT NULL,
  `cd_grupo` INT NOT NULL,
  `Vl_Diaria` DECIMAL(12,2) NULL,
  PRIMARY KEY (`Nr_Placa`),
  INDEX `Veic_cd_Proprietario_idx` (`Cd_Proprietario` ASC),
  INDEX `Veic_Tp_Auto_idx` (`Tp_Automovel` ASC),
  INDEX `Veic_Tp_Comb_idx` (`Tp_Combustivel` ASC),
  INDEX `Veic_cd_modelo_idx` (`cd_Modelo` ASC),
  INDEX `Veic_Cor_idx` (`cd_cor` ASC),
  INDEX `Veic_Grupo_idx` (`cd_grupo` ASC),
  CONSTRAINT `Veic_cd_Proprietario`
    FOREIGN KEY (`Cd_Proprietario`)
    REFERENCES `carloca`.`Loc_Proprietario` (`cd_proprietario`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `Veic_Tp_Auto`
    FOREIGN KEY (`Tp_Automovel`)
    REFERENCES `carloca`.`Loc_Tp_Automovel` (`cd_Tp_Automovel`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `Veic_Tp_Comb`
    FOREIGN KEY (`Tp_Combustivel`)
    REFERENCES `carloca`.`Loc_Tp_Combustivel` (`cd_Tp_Combustivel`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `Veic_cd_modelo`
    FOREIGN KEY (`cd_Modelo`)
    REFERENCES `carloca`.`Loc_Modelo` (`cd_Modelo`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `Veic_Cor`
    FOREIGN KEY (`cd_cor`)
    REFERENCES `carloca`.`Loc_Cor` (`cd_Cor`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `Veic_Grupo`
    FOREIGN KEY (`cd_grupo`)
    REFERENCES `carloca`.`Loc_Grupo` (`cd_Grupo`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `carloca`.`Loc_Item_Locacao`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `carloca`.`Loc_Item_Locacao` ;

CREATE TABLE IF NOT EXISTS `carloca`.`Loc_Item_Locacao` (
  `Nr_Pedido` INT NOT NULL,
  `Nr_Placa` VARCHAR(8) NOT NULL,
  `Vl_Diaria` DECIMAL(10,2) NULL,
  `Vl_Diaria_Calc` DECIMAL(10,2) NULL,
  PRIMARY KEY (`Nr_Pedido`, `Nr_Placa`),
  INDEX `Item_Loc_Nr_Placa_idx` (`Nr_Placa` ASC),
  CONSTRAINT `Item_Loc_Nr_Pedido`
    FOREIGN KEY (`Nr_Pedido`)
    REFERENCES `carloca`.`Loc_Pedido_Locacao` (`Nr_Pedido`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `Item_Loc_Nr_Placa`
    FOREIGN KEY (`Nr_Placa`)
    REFERENCES `carloca`.`Loc_Veiculo` (`Nr_Placa`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
